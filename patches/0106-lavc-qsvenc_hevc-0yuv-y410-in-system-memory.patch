From ee0703511ba142833a094dde5dbc46afd3f8b670 Mon Sep 17 00:00:00 2001
From: Haihao Xiang <haihao.xiang@intel.com>
Date: Thu, 30 Jun 2022 15:05:31 +0800
Subject: [PATCH 70/70] lavc/qsvenc_hevc: 0yuv, y410 in system memory

$ ffmpeg -y -f rawvideo -pix_fmt 0yuv -s:v 352x288 -i in.yuv -c:v hevc_qsv out.h265
$ mediainfo out.h265
[...]
Chroma subsampling                       : 4:4:4
Bit depth                                : 8 bits
Color range                              : Limited
---
 libavcodec/qsvenc_hevc.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/libavcodec/qsvenc_hevc.c b/libavcodec/qsvenc_hevc.c
index ae13ec3f43..4e7f62458a 100644
--- a/libavcodec/qsvenc_hevc.c
+++ b/libavcodec/qsvenc_hevc.c
@@ -318,6 +318,8 @@ const FFCodec ff_hevc_qsv_encoder = {
                                                     AV_PIX_FMT_D3D11,
                                                     AV_PIX_FMT_BGRA,
                                                     AV_PIX_FMT_X2RGB10,
+                                                    AV_PIX_FMT_0YUV,
+                                                    AV_PIX_FMT_Y410,
                                                     AV_PIX_FMT_NONE },
     .p.priv_class   = &class,
     .defaults       = qsv_enc_defaults,
-- 
2.17.1

